<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="260" viewBox="0 0 1400 260" role="img" aria-label="Counterpoint pipeline diagram">
  <defs>
    <style>
      .bg { fill: #ffffff; }
      .box { fill: #ffffff; stroke: #111827; stroke-width: 2; rx: 14; }
      .title { font: 700 18px/1.2 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; fill: #111827; }
      .text { font: 500 14px/1.2 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; fill: #111827; }
      .sub { font: 400 12px/1.2 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; fill: #374151; }
      .arrow { stroke: #111827; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead); }
      .small { font: 500 12px/1.2 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; fill: #111827; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#111827"/>
    </marker>
  </defs>

  <rect class="bg" x="0" y="0" width="1400" height="260"/>

  <!-- Header -->
  <text class="title" x="24" y="34">Counterpoint Pipeline</text>
  <text class="sub" x="24" y="56">Ingest → Normalize → Graph → Predict missing collaborations → Generate synthetic track feature vectors</text>

  <!-- Boxes row -->
  <!-- Box dimensions -->
  <!-- w=240 h=86; y=110 -->
  <g>
    <rect class="box" x="40" y="110" width="240" height="86" rx="14"/>
    <text class="text" x="160" y="145" text-anchor="middle">Raw data dumps</text>
    <text class="sub" x="160" y="167" text-anchor="middle">MusicBrainz / AcousticBrainz</text>
    <text class="sub" x="160" y="186" text-anchor="middle">Spotify-derived metadata</text>
  </g>

  <g>
    <rect class="box" x="320" y="110" width="240" height="86" rx="14"/>
    <text class="text" x="440" y="145" text-anchor="middle">ETL + normalization</text>
    <text class="sub" x="440" y="167" text-anchor="middle">Parse • clean • join</text>
    <text class="sub" x="440" y="186" text-anchor="middle">batch ingest</text>
  </g>

  <g>
    <rect class="box" x="600" y="110" width="240" height="86" rx="14"/>
    <text class="text" x="720" y="145" text-anchor="middle">PostgreSQL</text>
    <text class="sub" x="720" y="167" text-anchor="middle">artists • recordings • edges</text>
    <text class="sub" x="720" y="186" text-anchor="middle">audio features</text>
  </g>

  <g>
    <rect class="box" x="880" y="110" width="240" height="86" rx="14"/>
    <text class="text" x="1000" y="145" text-anchor="middle">Collaboration graph</text>
    <text class="sub" x="1000" y="167" text-anchor="middle">embeddings + graph features</text>
    <text class="sub" x="1000" y="186" text-anchor="middle">similarity • neighbors</text>
  </g>

  <g>
    <rect class="box" x="1160" y="110" width="240" height="86" rx="14"/>
    <text class="text" x="1280" y="143" text-anchor="middle">Models</text>
    <text class="sub" x="1280" y="165" text-anchor="middle">Link prediction → candidates</text>
    <text class="sub" x="1280" y="184" text-anchor="middle">CVAE → synthetic features</text>
  </g>

  <!-- Arrows -->
  <path class="arrow" d="M280 153 L320 153"/>
  <path class="arrow" d="M560 153 L600 153"/>
  <path class="arrow" d="M840 153 L880 153"/>
  <path class="arrow" d="M1120 153 L1160 153"/>

  <!-- Footer note -->
  <text class="small" x="24" y="235">Output: ranked “missing” collaborations + generated track-level feature vectors for downstream ranking, simulation, or model conditioning.</text>
</svg>
